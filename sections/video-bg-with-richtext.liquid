{%- if section.blocks.size > 0 -%}
    {%- for block in section.blocks -%}
        {%- assign img_url = block.settings.image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
        {% if block.type == 'video' %}
            <div class="introduction__container"
                 style="{%- if block.settings.video_link == blank -%}background-image: url('{{ block.settings.video_image  | img_url: 'master' }}');{%- endif -%}">
                {%- if block.settings.video_link != blank -%}
                    <div class="introduction__video_bg">
                        <video class="introduction__video" loop autoplay preload="none" muted playsinline
                               poster="https:{{ block.settings.video_image | img_url: 'master' }}">
                            <source src="{{ block.settings.video_link }}" type="video/mp4">
                        </video>
                    </div>
                {% endif %}
                <div class="overlay" style="opacity: 0.{{ block.settings.overlay_opacity }}"></div>
                <div class="introduction__wrap">
                    {%- style -%}
                        .videoBackground .introduction__pre_title p {
                        color: {{ block.settings.color_text }}!important;
                        }
                    {%- endstyle -%}

                    {% if block.settings.text != blank %}
                        <div class="introduction__pre_title" id="{{ block.id }}"
                             style="color: {{ block.settings.color_text }}">
                            {{ block.settings.text }}
                        </div>
                    {% endif %}

                    {% if block.settings.title != blank %}
                        <h2 class="introduction__title" style="color: {{ block.settings.color_text }}">
                            {{ block.settings.title | escape }}
                        </h2>
                    {% endif %}

                    {% if block.settings.button_link != blank and block.settings.button_label != blank %}

                        <a href="{{ block.settings.button_link }}" class="introduction__btn"
                           style="color: {{ block.settings.color_btn_text }}; background: {{ block.settings.color_btn_bg }}">

                            {{ block.settings.button_label | escape }}

                        </a>

                    {% endif %}

                </div>
            </div>
        {% else %}
            <div class="introduction__container"
                 style="background-color: {{ block.settings.color_bg }}; {%- if block.settings.image_bg != blank -%}background-image: url('{{ block.settings.image_bg | img_url: 'master' }}');{%- endif -%}">

                <div class="overlay" style="opacity: 0.{{ block.settings.overlay_opacity }}"></div>
                <div class="introduction__wrap">
                    {%- style -%}
                        .videoBackground .introduction__pre_title p {
                        color: {{ block.settings.color_text }}!important;
                        }
                    {%- endstyle -%}

                    {% if block.settings.text != blank %}
                        <div class="introduction__pre_title" id="{{ block.id }}"
                             style="color: {{ block.settings.color_text }}">
                            {{ block.settings.text }}
                        </div>
                    {% endif %}

                    {% if block.settings.title != blank %}
                        <h2 class="introduction__title" style="color: {{ block.settings.color_text }}">
                            {{ block.settings.title | escape }}
                        </h2>
                    {% endif %}

                    {% if block.settings.button_link != blank and block.settings.button_label != blank %}

                        <a href="{{ block.settings.button_link }}" class="introduction__btn"
                           style="color: {{ block.settings.color_btn_text }}; background: {{ block.settings.color_btn_bg }}">

                            {{ block.settings.button_label | escape }}
                        </a>

                    {% endif %}

                </div>

            </div>
        {% endif %}
    {%- endfor -%}
{% else %}

    <div class="placeholderNoblocks">
        This section doesnâ€™t currently include any content. Add content to this section using the sidebar.
    </div>

{%- endif -%}

<style>
    .introduction__video_bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden
    }

    .introduction__video {
        display: block;
        width: 100%;
        height: 100%;
        -o-object-fit: cover;
        object-fit: cover
    }

    .introduction__container {
        position: relative;
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        align-content: center;
        align-items: center;
        overflow: hidden;
    }

    @media screen and (min-width: 768px) {
        .introduction__container {
            aspect-ratio: 1440/619;
            border-radius: 2rem
        }
    }

    @media (max-width: 767px)and (min-width: 480px) {
        .introduction__container {
            aspect-ratio: 335/250;
            border-radius: 1.2rem
        }
    }

    @media screen and (max-width: 479px) {
        .introduction__container {
            aspect-ratio: 335/418;
            border-radius: 1.2rem
        }
    }

    .introduction__wrap {
        z-index: 1;
        position: relative;
        color: #fff;
        text-align: center;
        max-width: 72rem;
    }

    @media screen and (min-width: 768px) {
        .introduction__wrap {
            padding: 5rem 2rem 2rem
        }
    }

    @media screen and (max-width: 767px) {
        .introduction__wrap {
            padding: 1.4rem 2rem 2rem
        }
    }

    .introduction__container .overlay {
        display: block;
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: #000;
        z-index: 1;
    }

    .introduction__btn {
        min-width: 22.4rem;

        padding: 0 2rem;
        min-height: 4.4rem;
        line-height: 4.4rem;
        font-size: 1.6rem;
        border-radius: .4rem;
        font-weight: 500;
        color: #fff;
        transition: background-color .3s ease;
        border: 1px solid #fff;
        display: inline-flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        white-space: nowrap;
        cursor: pointer
    }

    .introduction__btn:hover {
        background-color: rgba(222, 222, 222, .6)
    }

    .introduction__title {
        font-weight: 600
    }

    @media screen and (min-width: 768px) {
        .introduction__title {
            font-size: 3.2rem;
            line-height: 1.28
        }
    }

    @media screen and (max-width: 767px) {
        .introduction__title {
            font-size: 2.4rem;
            line-height: 1.33
        }
    }

    @media screen and (min-width: 768px) {
        .introduction__title:not(:last-child) {
            margin-bottom: 2.4rem
        }
    }

    @media screen and (max-width: 767px) {
        .introduction__title:not(:last-child) {
            margin-bottom: 2rem
        }
    }


    .introduction__pre_title {
        font-weight: 400;
        line-height: 1.42
    }

    @media screen and (min-width: 768px) {
        .introduction__pre_title:not(:last-child) {
            margin-bottom: 2rem
        }
    }

    @media screen and (max-width: 767px) {
        .introduction__pre_title:not(:last-child) {
            margin-bottom: 1.2rem
        }
    }

    @media screen and (min-width: 768px) {
        .introduction__pre_title {
            font-size: 2rem
        }
    }

    @media screen and (max-width: 767px) {
        .introduction__pre_title {
            font-size: 2.4rem
        }
    }

    .videoBackground .placeholderNoblocks {
        text-align: center;
        max-width: 50rem;
        margin: 0 auto;
    }
</style>

{% schema %}

{
"name": {
  "en": "Video Background"
  },
  "tag": "section",  
  "class": "section introduction",
"max_blocks": 1,
"blocks": [
{
"type": "video",
"name": "Video",
"settings": [
{
"type": "url",
"id": "video_link",
"label": {
"en": "Video link"
}
},
{
"type": "image_picker",
"id": "video_image",
"label": {
"en": "Cover image"
}
},
{
"type": "range",
"id": "overlay_opacity",
"label": {
"en": "Overlay opacity"
},
"min": 0,
"max": 99,
"step": 1,
"unit": {
"en": "%"
},
"default": 0
},
{
"type": "header",
"content": {
"en": "Text"
}
},
{
"type": "text",
"id": "title",
"label": {
"en": "Heading"
},
"default": "Video slide"
},
{
"type": "richtext",
"id": "text",
"label": {
"en": "Description"
},
"default": {
"en": "<p>Use this text to share information about your brand with your customers. Describe a product, share announcements, or welcome customers to your store.</p>"
}
},
{
"type": "color",
"id": "color_text",
"label": {
"en": "Text color"
},
"default": "#ffffff"
},
{
"type": "text",
"id": "button_label",
"label": {
"en": "Button label"
}
},
{
"type": "url",
"id": "button_link",
"label": {
"en": "Button link"
}
},

{
"type": "color",
"id": "color_btn_text",
"label": {
"en": "Button text color"
},
"default": "#ffffff"
}
]
},
{
"type": "image",
"name": "Image",
"settings": [
{
"type": "color",
"id": "color_bg",
"label": {
"en": "Background color (optional)"
},
"default": "#16165b"
},
{
"type": "image_picker",
"id": "image_bg",
"label": {
"en": "or use an image (required)"
}
},
{
"type": "range",
"id": "overlay_opacity",
"label": {
"en": "Overlay opacity"
},
"min": 0,
"max": 99,
"step": 1,
"unit": {
"en": "%"
},
"default": 0
},
{
"type": "header",
"content": {
"en": "Text"
}
},
{
"type": "text",
"id": "title",
"default": "Image slide",
"label": {
"en": "Heading"
}
},
{
"type": "richtext",
"id": "text",
"label": {
"en": "Description"
},
"default": {
"en": "<p>Use this text to share information about your brand with your customers. Describe a product, share announcements, or welcome customers to your store.</p>"
}
},
{
"type": "color",
"id": "color_text",
"label": {
"en": "Text color"
},
"default": "#ffffff"
},
{
"type": "text",
"id": "button_label",
"label": {
"en": "Button label"
}
},
{
"type": "url",
"id": "button_link",
"label": {
"en": "Button link"
}
},
{
"type": "color",
"id": "color_btn_bg",
"label": {
"en": "Background button color"
},
"default": "#ffffff"
},
{
"type": "color",
"id": "color_btn_text",
"label": {
"en": "Button text color"
},
"default": "#ffffff"
}
]
}
],
"presets": [
{
"name": {
"en": "Video Background"
},
"category": {
"en": "Main"
},
"blocks": [
{
"type": "video"
}
]
}
]
}
{% endschema %}